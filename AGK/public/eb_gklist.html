<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>List of Members</title>
  <link href="eb_mpg.css" rel="stylesheet">
</head>
<ul class="topnav">
  <li><a href="./eb_mainpg.html">Home</a></li>
  <li><a class="active" href="./eb_gklist.html">List of GK Members</a></li>
  <li><a href="./eb_regpg.html">Register New Member</a></li>
  <li><a href="./eb_ptlog.html">Add Points to a Member</a></li>
</ul>
<body>
  <table style="width:100%">
    <tr>
      <th>Username</th>
      <th>Points</th>
    </tr>
    <script>
      fs = require('fs'); //Use the file system module 

      //returns a boolean (true or false) (Opens file only if it exists)
      if (fs.existsSync(filename)) {
        stats = fs.statSync(filename) //gets the stats of your file


        data = fs.readFileSync(filename, 'utf-8'); //Reads the file and returns back with data and then continues with code as requested.
        users_reg_data = JSON.parse(data); //Parses data in order to turn string into an object
      }
      app.post("/eb_gklist.html", function (request, response) {
        the_username = request.body.username;
        document.write(`
              <tr>
              <td ${users_reg_data[the_username].fullname}</td>
              <td ${users_reg_data[the_username].totalpts}</td>
              </tr>
        `);
      });
    </script>
  </table>
</body>

</html>