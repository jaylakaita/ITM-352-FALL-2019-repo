<script src="./events_pts.js" type="">
 /*Description: Points Calculation page for the Golden Key General Members
        only members that login through the general login page have access to the points calculated page
        
        Code is adapted from previous Assignment 2
        
        Jayla Kaita & Melissa Yago & Preetha Pant 12/19/19 */</script>
<script>
  //Total Points page loads after functions in Points Calculation page are checked 
  let params = (new URL(document.location)).searchParams;
  var quantities = [];
  if (params.has('purchase_submit')) {
    for (i = 0; i < events.length; i++) {
      if (params.has(`quantity${i}`)) {
        a_qty = params.get(`quantity${i}`);
        quantities[i] = a_qty;
      }
    }
  } else {
    document.write('no form submitted');
  }
  console.log(quantities);
/*table to display the Total Points with the events, points, and amount inputted in the Points Calculated page
  linked what is in the table to the events.js where all the prices items and pictures are*/
</script>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Total Points</title>
  <link href="gen_pttotal.css" rel="stylesheet">
  <script>//this is the link to the CSS page that creates the aesthetic of this page</script>
</head>

<body>
  <header>
    <h1>Golden Key International Honours Society</h1>
  </header>

  <table border="2">
    <tbody>
      <tr id="invoice">
        <th width="43%">Event</th>
        <th width="11%">Quantity</th>
        <th width="13%">Points</th>
        <th width="54%">Points Per Event</th>
      </tr>
      <script>
        grandtotal = 0;
        for (i = 0; i < events.length; i++) {
          if (quantities[i] > 0) {
            // product row
            extended_price = quantities[i] * events[i].Points
            grandtotal += extended_price
            document.write(`
        <tr>
          <td width="43%">${events[i].Event}</td>
          <td align="center" width="11%">${quantities[i]}</td>
          <td width="13%">${events[i].Points}</td>
          <td width="54%">${extended_price}</td>
        </tr>
        `);
          }
        }
      // Sources: Invoice WOD, Assignment 1 example
      </script>
      <tr>
        <td colspan="3" width="67%"><strong>Total</strong></td>
        <td width="54%"><strong>
            <script>document.write(grandtotal);</script></strong></td>
      </tr>
    </tbody>
  </table>
  <img src="images/GK.jpeg">
  <footer>
    <h2>
      Stay Golden!
    </h2>
  </footer>
</body>

<body>
  <div>
    <form action="./index.html">
      <input type="submit" value="Logout" id="logout" name="logout_submit">
    </form>
  </div>

</body>

</html>